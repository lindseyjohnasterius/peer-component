<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>PEER</title>
  <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
  <script src="https://lindseymysse.github.io/LNSYs-toolbox/helpers.js"></script>
  <script type="text/javascript" src="https://lindseymysse.github.io/qr-code-element/qr-code.js"></script>
  <script type="text/javascript" src="peer-component.js"></script>
</head>
<body>

  <div id="edit">
    <textarea></textarea>
    <button id="submit">submit</button>
  </div>

  <peer-component>
  </peer-component>
  <script>

  document.querySelector('#submit').addEventListener('click', function(e){
    const new_value = document.querySelector('textarea').value
    const peer_component = document.querySelector('peer-component')
    peer_component.innerHTML = new_value
    peer_component.update()
  })

  const options = getURLValues()
  if(options['target-id']){
    document.querySelector('peer-component').remove()
    document.querySelector('#edit').remove()
    const new_peer = document.createElement('peer-component')
    new_peer.setAttribute('target-id', options['target-id'])
    document.body.prepend(new_peer)
  }


  </script>
</body>
</html>
